import Documentation from "../../_documentation";

export default ({children}) => <Documentation title="Publishing datasets">{children}</Documentation>;

A materialization defines a table, or view that will be created in your data warehouse.

# Example: Create a view

To define a new materialization, create a `.sql` file in the `definitions` directory. The name of the file will be the name of the table created in your data warehouse.

For example, the file `definitions/example.sql` with the contents:

```js
select 1 as test
```

Will create a `view` called `example` in the default dataform schema defined in the [`dataform.json`](/configuration/#dataform.json) file.

There are many configuration options that can be applied to a materialization, for a full list see the [materializations reference](/reference/materializations).

# Example: Create a table

By default, materializations are created as views in your warehouse. To create a copy of the query result as table, you can use the `type` method to change the materialization type to `"table"`.

```sql
--js type("table");
select 1 as test
```

# Example: Referencing other datasets

TODO

## Example: Adding custom dependencies

TODO

# Example: Disable a dataset

TODO

# Executing statements after creation

You can execute one or more statements before or after a table is materialized using the [`postOps()`](/built-in-functions#postOps) built-in.

## Example: Granting table access

The following example SQL file defines a post operation to grant access to the dataset to specific groups, after the table or view is created.

```js
select 1 as test
--js postOps(`grant select on ${self()} to group "allusers@dataform.co"`);
```

## Executing statements before

TODO

# Configuration statements

e.g, cover the following all being equivelant

```sql
/*js
config({
  type: "table",
  disabled: true,
});
*/
```

```sql
--js type("table");
--js disabled(true);
```

```sql
/*js
type("table");
disabled(true);
*/
```

# Warehouse specific configuration

## BigQuery

For more information on configuring BigQuery tables, such as enabling table partitioning, check out the [BigQuery guide](/guides/warehouses/bigquery).

## Redshift

For more information on configuring Redshift tables, such as sort keys and dist keys, check out the [Redshift guide](/guides/warehouses/redshift).
